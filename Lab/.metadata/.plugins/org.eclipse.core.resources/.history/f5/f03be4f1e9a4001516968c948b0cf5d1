var data = require("data");

var tabbedWin = Ti.UI.createWindow({
	backgroundColor: "#ececec",
	title: "Hi"
});

var tabbedBar = Titanium.UI.iOS.createTabbedBar({
    labels:['TSM', 'C9', 'IMT', 'NRG'],
    backgroundColor:'#336699',
    top:50,
    style:Titanium.UI.iPhone.SystemButtonStyle.BAR,
    height:25,
    width:200
});

var table = Ti.UI.createTableView({
	top: 100
});

var sectionCollection = [];
for(n in data.tableData){
	var section = Ti.UI.createTableViewSection({
		headerTitle: n
	});
	for(var i = 0; i<data.tableData[n].length; i++){
		var row = Ti.UI.createTableViewRow({
			title: n,
			leftImage: "images/" + data.tableData[n][i].image,
			desc: data.tableData[n][i].desc,
			hasChild: true
		});
		section.add(row);
	}
	sectionCollection.push(section);
}

table.addEventListener("click", function(event){
	detail.openDetail(event.source);
});
table.setData(sectionCollection);

tabbedWin.add(tabbedBar, table);

exports.tabbedWin = tabbedWin;